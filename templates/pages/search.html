{% extends 'pages/base.html' %}
{% load static %}

{% block content %}
    <h2>SEARCH FUNCTION</h2>
    
    <form method="get">
        <label for="searchVal" name="searchVal">Search For A Location</label>
        <input type="text" name="searchVal" id="searchVal">
        <button type="submit">Search</button>
    </form>

    {% if searchResult %}
        <p>
            Your results are:
            <br> <br> <br>
            Items found: {{ searchResult.found }}
            <hr>
            Number of pages: {{ searchResult.totalNumPages }}
            <hr>
            Page Number: {{ searchResult.pageNum }}
            <hr>
            {% for result in searchResult.results %}
                Location: {{ result.searchVal }} <br>
                Block Number: {{ result.BLK_NO }} <br>
                Road Name: {{ result.ROAD_NAME }} <br>
                Building: {{ result.BUILDING }} <br>
                Address: {{ result.ADDRESS }} <br>
                Postal: {{ result.POSTAL }} <br>
                X-coordinate: {{ result.X }} <br>
                Y-coordinate: {{ result.Y }} <br>
                Latitude: {{ result.LATITUDE }} <br>
                Longitude: {{ result.LONGITUDE }} <br>

                <img src="https://developers.onemap.sg/commonapi/staticmap/getStaticImage?layerchosen=default&lat={{result.LATITUDE}}&lng={{result.LONGITUDE}}&zoom=17&height=512&width=512">

                <hr>
            {% endfor %}
        </p>

        <script src="{% static '/js/map.js' %}"></script>
    {% endif %}
   

{% endblock content %}